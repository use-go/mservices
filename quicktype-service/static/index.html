<!DOCTYPE html>
<html>

<head>
    <title>quicktype</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="Content-Language" content="zh-CN" />
    <meta name="Author" content="网页作者" />
    <meta name="Copyright" content="网站版权" />
    <meta name="keywords" content="网站关键字" />
    <meta name="description" content="网站描述" />
    <script src="https://cdn.staticfile.org/vue/2.2.2/vue.min.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <style>
    .row {
        display:flex;
        width: 100%;
        flex-direction: row;
        flex-wrap: nowrap;
        justify-content: center;
        align-content: stretch;
        align-items: stretch;
    }
    .item {
        padding: 5px;
    }
    .left {
        width: 18%;
        order: 1;
        align-self: auto;
        flex-basis: auto;
        flex-grow: 0;
        flex-shrink: 1;
    }
    .left ul {
        background: #f6f6f6;
        border:1px solid;
        border-color: #f9f9f9;
        border-radius: 5px;
    }
    .right {
        width: 78%;
        order: 1;
        align-self: auto;
        flex-basis: auto;
        flex-grow: 0;
        flex-shrink: 1;
    }
    .left ul>li {
        list-style:none;
        padding: 4px;
    }
    .left ul>li:hover{
        cursor:pointer;
        background-color:#ccc !important;
    }
    .act{
        cursor:pointer;
    }
    .act-nav {
        width: 100%;
        height: 32px;
        line-height:32px;
        background: #f6f6f6;
    }
    .act-bar{
        display:flex;
        width: 100%;
        height: 32px;
        line-height:32px;
        flex-direction: row;
        flex-wrap: nowrap;
        justify-content: flex-start;
        align-content: stretch;
        align-items: stretch;
        background: #f6f6f6;
    }
    .act-1 {
        height: 32px;
        order: 1;
        align-self: auto;
        flex-basis: auto;
        flex-grow: 0;
        flex-shrink: 1;
    }
    .act-2 {
        order: 1;
        align-self: auto;
        flex-basis: auto;
        flex-grow: 0;
        flex-shrink: 1;
        margin-left: 4px;
    }
    .act-3 {
        order: 1;
        align-self: auto;
        flex-basis: auto;
        flex-grow: 0;
        flex-shrink: 1;
        margin-left: 4px;
    }
    .act-4 {
        order: 1;
        align-self: auto;
        flex-basis: auto;
        flex-grow: 0;
        flex-shrink: 1;
        margin-left: 4px;
    }
    .code {
        background-color:#444;
        color:#fff;
        padding: 10px;
        font-size: 12px;
    }
    </style>
</head>

<body>
    <div class="container" id="app">
        <div class="row">
            <div class="item left">
                <ul>
                    <li v-for="tb in tables" v-on:click="table2proto(tb)">
                        {{ tb }}
                    </li>
                </ul>
            </div>
            <div class="item right">
                <div class="act-nav">{{ db }}/{{ table }}</div>
                <div class="act-bar">
                    <div class="act act-1" v-on:click="table2proto(table)">Proto</div>
                    <div class="act act-2" v-on:click="table2go(table)">Struct</div>
                    <div class="act act-3" v-on:click="table2handler(table)">Handler</div>
                    <div class="act act-4" v-on:click="table2rw(table)">Read/Write</div>
                </div>
                <div class="code" v-html="code" style="white-space: pre-wrap;"></div>
            </div>
        </div>
    </div>
</body>
<script>
    new Vue({
        el: '#app',
        data: {
            tables: [],
            table: '',
            db: 'yearning',
            code: ''
        },
        mounted () {
            axios
            .get('/quicktype/type/tables?dsn=root%3Agmt%40tcp(192.168.202.128%3A3306)%2Fyearning%3Fcharset%3Dutf8mb4%26parseTime%3DTrue%26loc%3DLocal')
            .then(response => response.data)
            .then(res => {
                this.tables = res.data
                this.table2proto(this.tables[0])
                this.table = this.tables[0]
            })
        },
        methods: {
            table2go: function (tb) {
                axios
                .get('/quicktype/type/table2go?table=' + tb + '&dsn=root%3Agmt%40tcp(192.168.202.128%3A3306)%2Fyearning%3Fcharset%3Dutf8mb4%26parseTime%3DTrue%26loc%3DLocal')
                .then(response => response.data)
                .then(res => {
                    this.code = res.data
                })
            },
            table2proto: function (tb) {
                axios
                .get('/quicktype/type/table2proto?table=' + tb + '&dsn=root%3Agmt%40tcp(192.168.202.128%3A3306)%2Fyearning%3Fcharset%3Dutf8mb4%26parseTime%3DTrue%26loc%3DLocal')
                .then(response => response.data)
                .then(res => {
                    this.code = res.data
                    this.table = tb
                })
            },
            table2handler: function (tb) {
                axios
                .get('/quicktype/type/table2handler?table=' + tb + '&dsn=root%3Agmt%40tcp(192.168.202.128%3A3306)%2Fyearning%3Fcharset%3Dutf8mb4%26parseTime%3DTrue%26loc%3DLocal')
                .then(response => response.data)
                .then(res => {
                    this.code = res.data
                })
            },
            table2rw: function (tb) {
                axios
                .get('/quicktype/type/table2rw?table=' + tb + '&dsn=root%3Agmt%40tcp(192.168.202.128%3A3306)%2Fyearning%3Fcharset%3Dutf8mb4%26parseTime%3DTrue%26loc%3DLocal')
                .then(response => response.data)
                .then(res => {
                    this.code = res.data
                })
            },
        }
    })
</script>
</html>